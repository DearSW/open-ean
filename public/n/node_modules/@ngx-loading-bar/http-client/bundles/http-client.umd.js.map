{"version":3,"file":"http-client.umd.js","sources":["~/@ngx-loading-bar/http-client/src/http.module.ts","~/@ngx-loading-bar/http-client/src/loading-bar.interceptor.ts"],"sourcesContent":["import { LoadingBarModule, LoadingBarService } from '@ngx-loading-bar/core';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { LoadingBarInterceptor } from './loading-bar.interceptor';\nexport class LoadingBarHttpClientModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n    HttpClientModule,\n    LoadingBarModule.forRoot(),\n  ],\n  exports: [\n    HttpClientModule,\n    LoadingBarModule,\n  ],\n  providers: [\n    { provide: HTTP_INTERCEPTORS, useClass: LoadingBarInterceptor, multi: true },\n  ],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction LoadingBarHttpClientModule_tsickle_Closure_declarations() {\n/** @type {?} */\nLoadingBarHttpClientModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nLoadingBarHttpClientModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { LoadingBarService } from '@ngx-loading-bar/core';\nimport { Injectable } from '@angular/core';\nimport { HttpEvent, HttpInterceptor, HttpHandler, HttpRequest, HttpEventType } from '@angular/common/http';\nimport { Observable } from 'rxjs/Observable';\nimport { _do } from 'rxjs/operator/do';\nimport { _finally } from 'rxjs/operator/finally';\nexport class LoadingBarInterceptor implements HttpInterceptor {\n/**\n * @param {?} loadingBar\n */\nconstructor(private loadingBar: LoadingBarService) {}\n/**\n * @param {?} req\n * @param {?} next\n * @return {?}\n */\nintercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    // https://github.com/angular/angular/issues/18155\n    const /** @type {?} */ meta = ( /** @type {?} */((req as any))).metadata || {};\n    if (meta && meta.ignoreLoadingBar === true) {\n      return next.handle(req);\n    }\n\n    let /** @type {?} */ started = false;\n\n    return _finally.call(_do.call(next.handle(req),\n      (event) => {\n        if (!started && event.type === HttpEventType.Sent) {\n          started = true;\n          this.loadingBar.start();\n        } else if (started && event.type === HttpEventType.Response) {\n          started = false;\n          this.loadingBar.complete();\n        }\n      },\n    ), () => started && this.loadingBar.complete());\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: LoadingBarService, },\n];\n}\n\nfunction LoadingBarInterceptor_tsickle_Closure_declarations() {\n/** @type {?} */\nLoadingBarInterceptor.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nLoadingBarInterceptor.ctorParameters;\n/** @type {?} */\nLoadingBarInterceptor.prototype.loadingBar;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["HTTP_INTERCEPTORS","LoadingBarModule","HttpClientModule","NgModule","LoadingBarService","Injectable","HttpEventType","_finally","_do"],"mappings":";;;;;;ACMA,IAAA,qBAAA,kBAAA,YAAA;;;;IAIA,SAAA,qBAAA,CADsB,UAAY,EAClC;QADsB,IAAtB,CAAA,UAAsB,GAAA,UAAA,CAAY;KAAkB;;;;;;IAOpD,qBAAA,CAAA,SAAA,CAAA,SALG,GAKH,UALG,GAAA,EAAA,IAAA,EAKH;QAAA,IAAA,KAAA,GAAA,IAAA,CAoBG;;QAlBC,qBALM,IAAA,GAAO,EAAA,GAAQ,GAAK,QAAC,IAAW,EAAA,CAAG;QAMzC,IAAI,IALC,IAAO,IAAA,CAAK,gBAAC,KAAoB,IAAA,EAAM;YAM1C,OALO,IAAA,CAAK,MAAC,CAAM,GAAC,CAAG,CAAC;SAMzB;QAED,qBALI,OAAA,GAAU,KAAA,CAAM;QAOpB,OALOO,iBAAA,CAAS,IAAC,CAAIC,OAAC,CAAG,IAAC,CAAI,IAAC,CAAI,MAAC,CAAM,GAAC,CAAG,EAM5C,UAAC,KALC,EAIR;YAEQ,IAAI,CALC,OAAC,IAAU,KAAA,CAAM,IAAC,KAAQF,kBAAA,CAAc,IAAC,EAAK;gBAMjD,OAAO,GALG,IAAA,CAAK;gBAMf,KAAI,CALC,UAAC,CAAU,KAAC,EAAK,CAAE;aAMzB;iBALM,IAAA,OAAK,IAAU,KAAA,CAAM,IAAC,KAAQA,kBAAA,CAAc,QAAC,EAAS;gBAM3D,OAAO,GALG,KAAA,CAAM;gBAMhB,KAAI,CALC,UAAC,CAAU,QAAC,EAAQ,CAAE;aAM5B;SACF,CACF,EALE,YAIP,EAJa,OAAA,OAAA,IAAW,KAAA,CAAK,UAAC,CAAU,QAAC,EAAQ,CAIjD,EAJiD,CAAE,CAAC;KAMjD,CAAH;;CA9BA,EAAA,CAAA,CAAA;AA0BO,qBAAP,CAAA,UAAO,GAAoC;IAM3C,EALE,IAAA,EAAMD,iBAAA,EAAW;CAMlB,CALC;;;;AAED,qBAAD,CAAA,cAAC,GAAA,YAAD,EAAC,OAAA;IAQD,EAAC,IAAI,EAAED,sBAAiB,GAAG;CAC1B,CAAD,EAAC,CAAC;ADzCF,IAAA,0BAAA,kBAAA,YAAA;IAAA,SAAA,0BAAA,GAAA;;;CAAA,EAAA,CAAA,CAAA;AAEgD,0BAAhD,CAAA,UAAgD,GAAoC;IADpF,EAEE,IAAA,EAAMD,eAAA,EAAU,IAAA,EAAM,CAAA;gBADtB,OAAO,EAEE;oBADPD,qBAAgB;oBAChBD,qBAAgB,CAEC,OAAC,EAAO;iBAD1B;gBACD,OAAO,EAEE;oBADPC,qBAAgB;oBAChBD,qBAAgB;iBACjB;gBACD,SAAS,EAEE;oBADT,EAEE,OAAA,EAASD,sBAAA,EAAmB,QAAA,EAAU,qBAAA,EAAuB,KAAA,EAAO,IAAA,EAAK;iBAD5E;aACF,EAEC,EAAG;CADJ,CAEC;;;;AAED,0BAAD,CAAA,cAAC,GAAA,YAAD,EAAC,OAAA,EACA,CADD,EACC,CAAC;;;;;;;;;;;;;"}